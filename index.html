<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Prompt Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      padding: 20px;
    }

    .app {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    @media (max-width: 768px) {
      .app { grid-template-columns: 1fr; }
    }

    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
    }

    h3 {
      margin: 0 0 16px 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
      font-size: 18px;
    }

    label {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
      display: block;
    }

    select, input, textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    textarea {
      min-height: 150px;
      resize: vertical;
    }

    .section { margin-bottom: 18px; }

    .rules-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .rule {
      display: grid;
      grid-template-columns: 18px auto;
      column-gap: 10px;
      align-items: start;
    }

    .rule span {
      font-size: 14px;
      line-height: 1.3;
    }

    .rule.suggestion span {
      color: #555;
      font-style: italic;
    }

    .btn {
      padding: 12px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: #667eea;
      color: #fff;
    }

    .btn-success {
      background: #2ecc71;
      color: #fff;
    }

    .token-box {
      background: #f6f7fb;
      padding: 10px;
      border-radius: 8px;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
    }
  </style>
</head>

<body>
<div class="app">

  <!-- CARD 1 -->
  <div class="card">
    <h3>Task & Rules</h3>

    <div class="section">
      <label>Task Type</label>
      <select id="task" onchange="renderRules()">
        <option value="coding">Coding</option>
        <option value="json_generation">JSON Generation</option>
        <option value="image_generation">Image Generation</option>
        <option value="image_analysis">Image Analysis</option>
        <option value="drafting">Drafting</option>
        <option value="planning">Planning</option>
        <option value="analysis">Analysis</option>
        <option value="qa">Q&A / Short Answer</option>
        <option value="brainstorming">Brainstorming</option>
        <option value="summarization">Summarization</option>
      </select>
    </div>

    <div class="section">
      <label>Rules</label>
      <div id="rules" class="rules-list"></div>
    </div>
  </div>

  <!-- CARD 2 -->
  <div class="card">
    <h3>Prompt Builder</h3>

    <div class="section">
      <label>Describe Task</label>
      <input id="desc" oninput="estimateTokens()" />
    </div>

    <div class="section token-box">
      <div>Estimated Tokens</div>
      <span id="tokenCount">0</span>
    </div>

    <div class="section">
      <button class="btn btn-primary" onclick="generate()">Generate JSON</button>
    </div>

    <div class="section">
      <label>Generated Prompt JSON</label>
      <textarea id="output"></textarea>
    </div>

    <div class="section">
      <button class="btn btn-success" onclick="copy()">Copy to Clipboard</button>
    </div>
  </div>

</div>

<script>
const TASK_RULES = {
  coding: {
    rules: [
      "code_only",
      "no_explanations",
      "no_markdown",
      "deterministic_output",
      "follow_language_version",
      "sample_message"
    ],
    suggestion: "specify_language_and_version"
  },
  json_generation: {
    rules: [
      "valid_json_only",
      "no_extra_fields",
      "comments",
      "specified_format"
    ],
    suggestion: "define_exact_json_schema"
  },
  image_generation: {
    rules: [
      "prompt_only",
      "explanation",
      "include_style_mood_composition"
    ],
    suggestion: "provide_style_mood_composition"
  },
  image_analysis: {
    rules: [
      "structured_output",
      "no_storytelling",
      "no_repetition"
    ],
    suggestion: "ask_observable_details_only"
  },
  drafting: {
    rules: [
      "clean_final_text",
      "no_meta_commentary",
      "no_justification"
    ],
    suggestion: "set_tone_and_audience"
  },
  planning: {
    rules: [
      "actionable_only",
      "no_motivational",
      "no_assumptions"
    ],
    suggestion: "define_constraints_clearly"
  },
  analysis: {
    rules: [
      "use_table",
      "no_background_explanation"
    ],
    suggestion: "define_decision_criteria"
  },
  qa: {
    rules: [
      "answer_only_question",
      "minimal_words",
      "no_followups"
    ],
    suggestion: "ask_precise_question"
  },
  brainstorming: {
    rules: [
      "no_ranking",
      "no_summaries"
    ],
    suggestion: "limit_number_of_ideas"
  },
  summarization: {
    rules: [
      "format_bullets",
      "strict_length_control",
      "no_commentary"
    ],
    suggestion: "specify_summary_length"
  }
};

function renderRules() {
  const t = task.value;
  const rulesDiv = document.getElementById("rules");
  rulesDiv.innerHTML = "";

  TASK_RULES[t].rules.forEach(rule => {
    const row = document.createElement("div");
    row.className = "rule";
    row.innerHTML =
      `<input type="checkbox" checked value="${rule}">
       <span>${rule.replaceAll("_"," ")}</span>`;
    rulesDiv.appendChild(row);
  });

  const suggestionRow = document.createElement("div");
  suggestionRow.className = "rule suggestion";
  suggestionRow.innerHTML =
    `<input type="checkbox" checked value="${TASK_RULES[t].suggestion}">
     <span>suggestion: ${TASK_RULES[t].suggestion.replaceAll("_"," ")}</span>`;
  rulesDiv.appendChild(suggestionRow);
}

function estimateTokens() {
  tokenCount.innerText = Math.ceil(desc.value.length / 4);
}

function generate() {
  const rules = {};
  document.querySelectorAll("#rules input:checked")
    .forEach(cb => rules[cb.value] = true);

  const payload = {
    role: "system",
    task_type: task.value,
    rules,
    user_input: desc.value
  };

  output.value = JSON.stringify(payload, null, 2);
}

function copy() {
  navigator.clipboard.writeText(output.value);
  alert("Copied");
}

renderRules();
</script>
</body>
</html>
