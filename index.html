<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Prompt Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      padding: 20px;
    }

    .app {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    @media (max-width: 768px) {
      .app {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
    }

    .card h3 {
      margin: 0 0 16px 0;
      font-size: 18px;
      color: #333;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }

    label {
      font-size: 14px;
      font-weight: 600;
      color: #444;
      margin-bottom: 6px;
      display: block;
    }

    select,
    input,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      outline: none;
    }

    textarea {
      resize: vertical;
      min-height: 140px;
    }

    .section {
      margin-bottom: 18px;
    }

    /* FIXED RULE CHECKBOX LAYOUT */
    .rules-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .rule {
      display: grid;
      grid-template-columns: 18px auto;
      align-items: center;
      column-gap: 10px;
      padding: 6px 4px;
    }

    .rule input {
      margin: 0;
      width: 16px;
      height: 16px;
      accent-color: #667eea;
      flex-shrink: 0;
    }

    .rule span {
      font-size: 14px;
      color: #333;
      text-align: left;
      line-height: 1.3;
    }

    /* BUTTONS */
    .btn {
      padding: 12px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: #667eea;
      color: #fff;
      box-shadow: 0 6px 16px rgba(102,126,234,0.4);
    }

    .btn-success {
      background: #2ecc71;
      color: #fff;
      box-shadow: 0 6px 16px rgba(46,204,113,0.4);
    }

    /* TOKEN ESTIMATOR */
    .token-box {
      background: #f6f7fb;
      border-radius: 8px;
      padding: 10px;
      font-size: 13px;
      color: #444;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .token-box span {
      font-weight: 600;
      color: #333;
    }
  </style>
</head>

<body>
<div class="app">

  <!-- CARD 1 -->
  <div class="card">
    <h3>Task Configuration</h3>

    <div class="section">
      <label>Task Type</label>
      <select id="task" onchange="renderRules()">
        <option value="coding">Coding</option>
        <option value="json_generation">JSON Generation</option>
        <option value="image_generation">Image Generation</option>
        <option value="image_analysis">Image Analysis</option>
        <option value="drafting">Drafting</option>
        <option value="planning">Planning</option>
        <option value="analysis">Analysis</option>
        <option value="qa">Q&A / Short Answer</option>
        <option value="brainstorming">Brainstorming</option>
        <option value="summarization">Summarization</option>
      </select>
    </div>

    <div class="section">
      <label>Rules</label>
      <div id="rules" class="rules-list"></div>
    </div>
  </div>

  <!-- CARD 2 -->
  <div class="card">
    <h3>Prompt Builder</h3>

    <div class="section">
      <label>Describe Task</label>
      <input id="desc" placeholder="What exactly do you want?" oninput="estimateTokens()" />
    </div>

    <div class="section token-box">
      <div>Estimated Tokens</div>
      <span id="tokenCount">0</span>
    </div>

    <div class="section">
      <button class="btn btn-primary" onclick="generate()">Generate JSON</button>
    </div>

    <div class="section">
      <label>Generated Prompt JSON</label>
      <textarea id="output"></textarea>
    </div>

    <div class="section">
      <button class="btn btn-success" onclick="copy()">Copy to Clipboard</button>
    </div>
  </div>

</div>

<script>
const TASK_RULES = {
  coding: ["code_only","no_explanations","no_markdown","deterministic_output"],
  json_generation: ["valid_json_only","no_extra_fields","no_comments"],
  image_generation: ["prompt_only","no_analysis","no_artist_names"],
  image_analysis: ["structured_output","no_speculation","answer_only_asked"],
  drafting: ["respect_tone","respect_word_limit","single_version"],
  planning: ["bullet_sections","no_storytelling","actionable_only"],
  analysis: ["no_essays","clear_criteria","explicit_decision"],
  qa: ["short_answer","no_examples","no_rephrasing"],
  brainstorming: ["fixed_number","one_line_per_idea","no_elaboration"],
  summarization: ["preserve_meaning","no_new_info","strict_length"]
};

function renderRules() {
  const rulesDiv = document.getElementById("rules");
  rulesDiv.innerHTML = "";
  TASK_RULES[task.value].forEach(rule => {
    const row = document.createElement("div");
    row.className = "rule";
    row.innerHTML = `<input type="checkbox" checked value="${rule}">
                     <span>${rule.replaceAll("_"," ")}</span>`;
    rulesDiv.appendChild(row);
  });
}

function estimateTokens() {
  const text = document.getElementById("desc").value;
  const approx = Math.ceil(text.length / 4);
  document.getElementById("tokenCount").innerText = approx;
}

function generate() {
  const rules = {};
  document.querySelectorAll("#rules input:checked").forEach(cb => rules[cb.value] = true);

  const payload = {
    role: "system",
    task_type: task.value,
    rules,
    user_input: desc.value
  };

  output.value = JSON.stringify(payload, null, 2);
}

function copy() {
  navigator.clipboard.writeText(output.value);
  alert("Copied to clipboard");
}

renderRules();
</script>
</body>
</html>
